(function(d){typeof define=="function"&&define.amd?define(d):d()})(function(){"use strict";var We=Object.defineProperty;var He=(d,m,g)=>m in d?We(d,m,{enumerable:!0,configurable:!0,writable:!0,value:g}):d[m]=g;var u=(d,m,g)=>(He(d,typeof m!="symbol"?m+"":m,g),g);function d(t,e,n={}){const s=t.map(i=>{const c=[i.id,i.name,i.label,i.type].find(a=>a!=null&&e.some(o=>a.toLowerCase().includes(o)));if(!(c==null||i.value==null))return[n[c]??c,i.value]}).filter(i=>i!=null);return Object.fromEntries(s)}const m=["country","state","city"],g=["name","phone","firstName","lastName","fullName","title","role","username"],Q={role:"title"},X=["employees","employeeCount","company","website"],Z={employeeCount:"employees",company:"name"},ee=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;function te(t){return t!=null&&ee.test(t)}function C(t){const e=t.find(c=>te(c.value)),n=d(t,g,Q),s=d(t,m),i=d(t,X,Z),r=e==null?void 0:e.value;return{id:r,traits:{...n,company:i.name,address:s,email:r},groupTraits:i}}/*! js-cookie v3.0.5 | MIT */function E(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)t[s]=n[s]}return t}var ne={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function b(t,e){function n(i,r,c){if(!(typeof document>"u")){c=E({},e,c),typeof c.expires=="number"&&(c.expires=new Date(Date.now()+c.expires*864e5)),c.expires&&(c.expires=c.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var o in c)c[o]&&(a+="; "+o,c[o]!==!0&&(a+="="+c[o].split(";")[0]));return document.cookie=i+"="+t.write(r,i)+a}}function s(i){if(!(typeof document>"u"||arguments.length&&!i)){for(var r=document.cookie?document.cookie.split("; "):[],c={},a=0;a<r.length;a++){var o=r[a].split("="),l=o.slice(1).join("=");try{var f=decodeURIComponent(o[0]);if(c[f]=t.read(l,f),i===f)break}catch{}}return i?c[i]:c}}return Object.create({set:n,get:s,remove:function(i,r){n(i,"",E({},r,{expires:-1}))},withAttributes:function(i){return b(this.converter,E({},this.attributes,i))},withConverter:function(i){return b(E({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var v=b(ne,{path:"/"});const _=()=>window.crypto!=null&&window.crypto.randomUUID!=null?window.crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)});function A(t){return t===""||t==null?new URLSearchParams:new URLSearchParams(t)}function I(t){const e=window.location;return t&&e.hash.length>0?`${e.pathname}${e.hash}`:e.pathname}function L(t,e){try{return JSON.parse(t)}catch{return e}}function N(t){try{return JSON.stringify(t)}catch{}}function ie(t,e=0){document.readyState!=="loading"?setTimeout(t,e):document.addEventListener("DOMContentLoaded",t)}function S(t,e){t.contentDocument!=null?e(t.contentDocument):t.addEventListener("load",()=>{t.contentDocument!=null&&e(t.contentDocument)})}function O(t){return t.nodeName.toLowerCase()==="form"}function se(t){const e=t.nodeName.toLowerCase();return["input","textarea","select"].includes(e)}class re{constructor(){u(this,"storage");try{this.storage=window.localStorage}catch{}}set(e,n){var i;N(n)!=null&&((i=this.storage)==null||i.setItem(e,JSON.stringify(n)))}setWithExpiration(e,n,s){const i=Date.now()+s*24*60*60*1e3,r={value:n,_syftExpiration:i};this.set(e,r)}get(e){var s,i;const n=(s=this.storage)==null?void 0:s.getItem(e);if(n!=null){const r=L(n);if(r===void 0)return;if(r._syftExpiration!=null){if(Date.now()>r._syftExpiration){(i=this.storage)==null||i.removeItem(e);return}return r.value}return r}}remove(e){var n;(n=this.storage)==null||n.removeItem(e)}}class R{constructor(e){this.domain=e}set(e,n){this.setWithExpiration(e,n,365)}setWithExpiration(e,n,s){const i=N(n);i!=null&&v.set(e,i,{expires:s,domain:this.domain})}get(e){const n=v.get(e);if(n!=null)return L(n)}remove(e){v.remove(e)}}class P{constructor(){u(this,"inMemory",new Map)}set(e,n){this.inMemory.set(e,n)}get(e){return this.inMemory.get(e)}remove(e){this.inMemory.delete(e)}}class U{constructor(e,n){if(this.namespace=e,this.stores=n,n.length===0){this.stores=[new P,new R];const s=new re;s.storage!=null&&this.stores.push(s)}}set(e,n){const s=`${this.namespace}.${e}`;for(const i of this.stores)i.set(s,n)}setWithExpiration(e,n,s){const i=`${this.namespace}.${e}`;for(const r of this.stores)r.setWithExpiration!=null&&r.setWithExpiration(i,n,s)}get(e){const n=`${this.namespace}.${e}`,s=[];for(const i of this.stores){const r=i.get(n);if(r!==void 0){for(const c of s)c.set(n,r);return r}else s.push(i)}}remove(e){const n=`${this.namespace}.${e}`;for(const s of this.stores)s.remove(n)}}new U("syft",[]);function oe(t){let e;return Object.keys(q).find(n=>t.has(n)?(e={id:t.get(n)??void 0,type:q[n],[n]:t.get(n)},!0):!1),e}function ce(t){const e={};for(const n of t.keys())if(n.substring(0,4)==="utm_"){let s=n.substring(4);s==="campaign"&&(s="name"),e[s]=t.get(n)}if(Object.keys(e).length!==0)return e}function ae(t){const e={};if(t!=null)for(const n of t.keys())ye.includes(n)&&(e[n]=t.get(n));if(Object.keys(e).length!==0)return e}function ue(t){const e={};if(t!=null)for(const n of t.keys())n==="sy_e"?e.email=t.get(n):n==="sy_d"&&(e.domain=t.get(n));if(Object.keys(e).length!==0)return e}function le(){const t=v.get("_ga");if(t!=null)return{id:t}}function fe(){if(!(typeof window.posthog>"u"))return window.posthog.get_distinct_id()}function de(){const{search:t}=location,e=A(t),n={},s=fe();if(s!=null&&(n.postHogId=s),e!=null)for(const r of e.keys())r==="_hsenc"&&(n.hsenc=e.get(r));const i=v.get("hubspotutk");if(i!=null&&(n.hubspotutk=i),Object.keys(n).length!==0)return n}function M(){const{search:t}=location,e=A(t),n=oe(e),s=ce(e),i=ae(e),r=ue(e);return{referrer:n,campaign:s,clickIds:i,syftIds:r}}const he=1,F="source_touch";function me(t){const e=M(),n=t.get(F);return n!=null&&(e.campaign==null&&(e.campaign=n.campaign),e.referrer==null&&(e.referrer=n.referrer),e.syftIds==null&&(e.syftIds=n.syftIds),e.clickIds==null&&(e.clickIds=n.clickIds)),t.setWithExpiration(F,e,he),e}const pe=30,D="initial_source_touch";function ge(t){let e=t.get(D);return e!=null||(e=M(),t.setWithExpiration(D,e,pe)),e}const q={btid:"dataxu",urid:"millennial-media"},ye=["dclid","fbclid","gclid","ko_click_id","li_fat_id","msclkid","ttclid","twclid","wbraid"],j="anonymous_id",B="common_props",W="user_id",H="user_traits";function ve(t,e){return JSON.stringify(t)===JSON.stringify(e)}class Ee{constructor(e,n){u(this,"options");u(this,"configStore");u(this,"anonymousId");u(this,"commonProperties",{});u(this,"userId");u(this,"userTraits");u(this,"session");u(this,"amp");u(this,"initialSource");u(this,"source");var s,i;this.options=e,this.configStore=n,this.anonymousId=this.configStore.get(j),this.anonymousId==null&&(this.anonymousId=_()),this.configStore.set(j,this.anonymousId),this.userId=this.configStore.get(W),this.userTraits=this.configStore.get(H)??{},this.commonProperties=this.configStore.get(B)??{},(i=(s=this.options).identifyCallback)==null||i.call(s,this.anonymousId,this.userId,this.userTraits),this.source=me(this.configStore),this.initialSource=ge(this.configStore)}__setUser(e,n){let s=n;return(this.userId==null||this.userId===e)&&(s={...this.userTraits,...n}),this.userId===e&&ve(this.userTraits,s)?!1:(this.userId=e,this.userTraits=s,this.configStore.set(W,e),this.configStore.set(H,s),!0)}enable(){window.syftc.enabled=!0}disable(){window.syftc.enabled=!1}identify(e,n={},s={}){var r,c;if(!this.__setUser(e,n))return;const i=this._getPartialEvent(s);this._logEvent({...i,type:"identify",context:{...i.context,traits:void 0},traits:this.userTraits}),(c=(r=this.options).identifyCallback)==null||c.call(r,this.anonymousId,this.userId,this.userTraits)}setCommon(e){this.commonProperties=e,this.configStore.set(B,e)}track(e,n,s){const i=this._getPartialEvent(s);this._logEvent({...i,event:e,name:e,type:"track",properties:{...i.properties,...n}})}signup(e,n={},s){if(!this.__setUser(e,n))return;const i=this._getPartialEvent(s);this._logEvent({...i,type:"signup",context:{...i.context,traits:void 0},traits:this.userTraits})}_page(e,n,s,i,r){const c=this._getPartialEvent(r);this._logEvent({...c,type:e,name:s,properties:{...c.properties,...i,category:n}})}page(e,n,s,i){this._page("page",e,n,s,i)}_getPartialEvent(e){const n={messageId:_(),userId:(e==null?void 0:e.userId)??this.userId,anonymousId:(e==null?void 0:e.anonymousId)??this.anonymousId,context:{...e==null?void 0:e.context,traits:this.userTraits},properties:{...this.commonProperties},timestamp:(e==null?void 0:e.timestamp)??new Date},s=n.context.initialSource??this.initialSource,i={...this.source};n.context.referrer!=null&&(i.referrer=n.context.referrer),n.context.campaign!=null&&(i.campaign=n.context.campaign),n.context.clickIds!=null&&(i.clickIds=n.context.clickIds);const r=n.context.amp??le(),c=de();return{...n,session:this.session?{id:this.session.id,startTime:this.session.startTime}:void 0,context:{locale:navigator.language,page:{path:location.pathname,referrer:document.referrer??null,search:location.search,title:document.title,url:location.href},...i,initialSource:s,amp:r,analyticsIds:c,deviceWidth:window.innerWidth,...n.context}}}_logEvent(e){this.options.uploader.addToQueue(e)}}const Ie="0.1.56",Se="https://event.syftdata.com/events";class Te{constructor(e){u(this,"events",[]);u(this,"sourceId");u(this,"url");u(this,"replicateTo");u(this,"batchSize");u(this,"maxWaitingTime");u(this,"retries");u(this,"preferBeacon");u(this,"isUploading",!1);u(this,"oldestEventTimestamp",0);u(this,"currentRetryCount",0);u(this,"currentTimeout");u(this,"__flush",e=>{if(this.events.length===0||window.syftc.enabled===!1)return;const n=this.events.splice(0,this.events.length);this.isUploading=!0,clearTimeout(this.currentTimeout),this.currentTimeout=void 0,this.upload(n,e).then(()=>{this.currentRetryCount=0,this.isUploading=!1}).catch(()=>{if(this.currentRetryCount>=this.retries){this.currentRetryCount=0,this.isUploading=!1;return}this.events=[...n,...this.events],this.oldestEventTimestamp=0,this.currentRetryCount=this.currentRetryCount+1,this.currentTimeout=setTimeout(()=>{this.__flush(e)},this.currentRetryCount*2e3)})});const{sourceId:n,url:s,batchSize:i=10,maxWaitingTime:r=1e4,retries:c=2,preferBeacon:a=!1,replicateTo:o=[]}=e;this.sourceId=n,this.url=s,this.batchSize=i,this.maxWaitingTime=r,this.retries=c,this.preferBeacon=a,this.replicateTo=o}addToQueue(e){return this.events.length===0&&(this.oldestEventTimestamp=Date.now()),this.events.push(e),this.flushIfRequired(),!0}flushIfRequired(){if(this.isUploading)return;this.events.length>=this.batchSize&&this.__flush(this.preferBeacon);const n=Date.now()-this.oldestEventTimestamp;if(n>=this.maxWaitingTime)this.__flush(this.preferBeacon);else if(this.currentTimeout===void 0){const s=this.maxWaitingTime-n;this.currentTimeout=setTimeout(()=>{this.flushIfRequired()},s)}}async upload(e,n){const s={events:e,sourceId:this.sourceId,version:Ie,sentAt:new Date};return await new Promise((i,r)=>{var a;const c=n?(a=navigator==null?void 0:navigator.sendBeacon)==null?void 0:a.bind(navigator):void 0;if(c!=null){const o=JSON.stringify(s),l=c(this.url,o);this.replicateTo.forEach(f=>{c(f,o)}),i(l)}else fetch(this.url,{priority:"low",method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},mode:"no-cors",body:JSON.stringify(s)}).then(()=>(this.replicateTo.forEach(o=>{fetch(o,{priority:"low",method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},mode:"no-cors",body:JSON.stringify(s)}).catch(()=>{})}),i(!0))).catch(o=>{r(new Error(`Failed to upload events: ${o.message}`))})})}urgentFlush(){this.__flush(!0)}}function $(t){var n;if(!(t instanceof HTMLElement))return"";let e=t.innerText.trim();return e.length===0&&(e=(n=t.textContent)==null?void 0:n.trim(),(e==null||e.length===0)&&(e=t.getAttribute("aria-label"),(e==null||e.length===0)&&(e=t.getAttribute("title")))),e??""}function we(t){const e=i=>{if(i.type!=="click")return;let r=i.target;if(r=r.closest("button, a"),r==null)return;const c=r.getAttribute("href");(r.tagName==="BUTTON"||r.tagName==="SPAN"||r.tagName==="A"&&(c==null||c==="#"))&&t(r.tagName,$(r),{id:r.id,class:r.getAttribute("class"),href:c})},n=i=>{const r=document.getSelection();if(r==null)return;const c=i.target;t("copy",r.toString(),{id:c.id,class:c.getAttribute("class")})};document.addEventListener("click",e,{capture:!0}),document.addEventListener("copy",n,{capture:!0});const s=document.querySelectorAll("iframe");return s.forEach(i=>{const r=i.contentDocument;r!=null&&(r.addEventListener("click",e,{capture:!0}),r.addEventListener("copy",n,{capture:!0}))}),()=>{document.removeEventListener("click",e,{capture:!0}),document.removeEventListener("copy",n,{capture:!0}),s.forEach(i=>{const r=i.contentDocument;r!=null&&(r.removeEventListener("click",e,{capture:!0}),r.removeEventListener("copy",n,{capture:!0}))})}}function be(t,e=window.location.href){if(!(t==null||t===""))try{return new URL(t,e)}catch{}}function _e(t){if(t.labels!=null&&t.labels.length>0){const e=Array.from(t.labels).map(n=>$(n)).filter(n=>n!=null&&n.length>0);if(e.length>0)return e[0]}}function K(t){const e=[];return Array.from(t.elements).forEach(s=>{if(!se(s)||s.value==null||s instanceof HTMLInputElement&&(s.type==="checkbox"||s.type==="radio")&&!s.checked)return;const i=_e(s);e.push({id:s.id,label:i,name:s.name,type:s.type,tagName:s.tagName,value:s.value})}),e}function ke(t,e){t.querySelectorAll("form").forEach(s=>{Object.entries(e).forEach(([i,r])=>{if(r==null)return;const c=document.createElement("input");c.type="hidden",c.name=`utm_${i}`,c.value=r,s.appendChild(c)})})}function xe(t,e){function n(a,o){const l=I(!0);t(l,{attributes:{...a.dataset},fields:K(a)},o)}const s=a=>{const o=a.target;if(!(o==null||!O(o))){if(o.dataset.syftSubmitted==="true"){delete o.dataset.syftSubmitted;return}if(typeof o.requestSubmit=="function"){const l=a.submitter;n(o,be(o.action)),typeof process<"u",o.dataset.syftSubmitted="true",a.preventDefault(),a.stopPropagation(),setTimeout(()=>{o.requestSubmit(l)},0)}}},i=a=>{a.addEventListener("submit",s,{capture:!0}),e!=null&&ke(a,e)};i(document);const r=new MutationObserver(a=>{a.forEach(o=>{o.type==="childList"&&o.addedNodes.forEach(l=>{l instanceof HTMLIFrameElement&&S(l,i)})})});document.querySelectorAll("iframe").forEach(a=>{S(a,i)}),r.observe(document,{childList:!0,subtree:!0});const c=HTMLFormElement.prototype.submit;return HTMLFormElement.prototype.submit=function(){try{n(this)}catch{}c.call(this)},()=>{document.removeEventListener("submit",s,{capture:!0}),document.querySelectorAll("iframe").forEach(a=>{const o=a.contentDocument;o!=null&&o.removeEventListener("submit",s,{capture:!0})}),HTMLFormElement.prototype.submit=c}}function k(t,e){function n(){const a=I(!0);e(a,{attributes:{...this.dataset},fields:K(this)})}const s=new Set;function i(a){O(a)?(a.addEventListener("input",n),s.add(a)):"querySelectorAll"in a&&a.querySelectorAll("form").forEach(i)}function r(a){a instanceof HTMLFormElement?(a.removeEventListener("input",n),s.delete(a)):"querySelectorAll"in a&&a.querySelectorAll("form").forEach(r)}const c=new MutationObserver(a=>{a.forEach(o=>{o.type==="childList"&&(o.addedNodes.forEach(i),o.removedNodes.forEach(r))})});return t.querySelectorAll("form").forEach(i),c.observe(t,{subtree:!0,childList:!0}),()=>{s.forEach(a=>{a.removeEventListener("input",n)}),s.clear(),c.disconnect()}}function Ce(t){const e=[k(document,t)],n=new MutationObserver(s=>{s.forEach(i=>{i.type==="childList"&&i.addedNodes.forEach(r=>{r instanceof HTMLIFrameElement&&S(r,c=>{e.push(k(c,t))})})})});return document.querySelectorAll("iframe").forEach(s=>{S(s,i=>{e.push(k(i,t))})}),n.observe(document,{childList:!0,subtree:!0}),()=>{e.forEach(s=>{s()})}}function z(t,e){const n={subtree:!0,childList:!0,attributes:!0,attributeFilter:["href"]};function s(o){if(this.dataset.syftClicked==="true"){delete this.dataset.syftClicked;return}e(this.href,this),typeof process<"u",this.dataset.syftClicked="true",setTimeout(()=>{this.click()},10),o.preventDefault()}const i=new Set;function r(o){o instanceof HTMLAnchorElement?o.host!==location.host&&(o.addEventListener("click",s),i.add(o)):"querySelectorAll"in o&&o.querySelectorAll("a").forEach(r)}function c(o){o instanceof HTMLAnchorElement?(o.removeEventListener("click",s),i.delete(o)):"querySelectorAll"in o&&o.querySelectorAll("a").forEach(c)}const a=new MutationObserver(o=>{o.forEach(l=>{l.type==="attributes"?(c(l.target),r(l.target)):l.type==="childList"&&(l.addedNodes.forEach(r),l.removedNodes.forEach(c))})});return t.querySelectorAll("a").forEach(r),a.observe(t,n),()=>{i.forEach(o=>{o.removeEventListener("click",s)}),i.clear(),a.disconnect()}}function Ae(t){const e=[z(document,t)];return document.querySelectorAll("iframe").forEach(s=>{s.addEventListener("load",()=>{const i=s.contentDocument;i!=null&&e.push(z(i,t))})}),()=>{e.forEach(s=>{s()})}}function Le(t,e=!0){const n=()=>{t(I(e))},s=history.pushState;return s!=null&&(history.pushState=function(i,r,c){s.apply(this,[i,r,c]),n()},addEventListener("popstate",n)),e&&addEventListener("hashchange",n),()=>{s!=null&&(history.pushState=s,removeEventListener("popstate",n)),e&&removeEventListener("hashchange",n)}}const Ne=/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/,Oe=/(^\d{3}-?\d{2}-?\d{4}$)/;function Re(t){return!(t==null||typeof t=="string"&&(t=t.trim(),Ne.test(t.replace(/[- ]/g,""))||Oe.test(t)))}function Pe(t){return t.tagName==="P"||t.tagName==="ARTICLE"||t.tagName==="DIV"}function Ue(t,e=5){var n;if(!(t instanceof HTMLInputElement)&&Pe(t)){const s=(n=t.textContent)==null?void 0:n.trim().replace(/[\r\n]/g," ").split(/\s+/).filter(Re);if(s&&s.length>e)return s.join(" ").trim().slice(0,250)}}const Y=["scroll","resize"],J=["keydown","keyup","mousedown","mousemove","touchstart","touchmove","click","play","contextmenu"],x="session",T=(t,e,n,s,i)=>{n.forEach(r=>{e[`${t}EventListener`](r,s,i)})},Me=(t,e)=>{for(;e-- >0&&t!=null;){const n=Ue(t);if(n!=null&&n.length>0)return n;t=t.parentElement}};class Fe{constructor({configStore:e,callback:n,idleTimeCheckIntervalMs:s=10*1e3,idleTimeoutMs:i=30*1e3,sessionTimeoutMs:r=10*60*1e3}){u(this,"times");u(this,"isIdle");u(this,"idleIntervalId");u(this,"idleTimeoutMs");u(this,"sessionTimeoutMs");u(this,"idleTimeCheckIntervalMs");u(this,"callback");u(this,"configStore");u(this,"session");u(this,"refreshSession",e=>{if(e!=null){const n=performance.now()-e.lastActivityTime;n>=0&&n<this.sessionTimeoutMs?this.session=e:(this.callback.onEndSession(e),this.createNewSession())}else this.createNewSession()});u(this,"createNewSession",()=>{this.times=[];const e={id:_(),startTime:new Date,lastActivityTime:performance.now(),content:[]};return this.configStore.set(x,e),this.session=e,this.callback.onNewSession(e),e});u(this,"onBrowserActiveChange",()=>{document.visibilityState==="visible"?this.onActivity():this.markAsIdle()});u(this,"notifyTheSession",()=>{this.callback.onContinueSession!=null&&(this.callback.onContinueSession(this.session,Math.trunc(this.getTimeInMilliseconds()),Math.trunc(performance.now()-this.times[0].start),this.session.content),this.session.content=[])});u(this,"markAsIdle",()=>{this.isIdle=!0,this.stopTimer()});u(this,"checkIfIdle",()=>{const e=performance.now()-this.session.lastActivityTime;e>0&&e<this.idleTimeoutMs?this.notifyTheSession():this.markAsIdle(),this.configStore.set(x,this.session)});u(this,"onActivity",e=>{this.isIdle&&(this.refreshSession(this.session),this.startTimer(),this.isIdle=!1);try{if((e==null?void 0:e.type)==="click"){const n=e.target,s=Me(n,2);if(s!=null&&!this.session.content.includes(s))for(this.session.content.push(s);this.session.content.length>3;)this.session.content.shift()}}catch{}this.session.lastActivityTime=performance.now()});u(this,"registerEventListeners",()=>{const e={passive:!0},n={...e,capture:!0};document.addEventListener("visibilitychange",this.onBrowserActiveChange),T("add",window,Y,this.onActivity,n),T("add",document,J,this.onActivity,e)});u(this,"unregisterEventListeners",()=>{document.removeEventListener("visibilitychange",this.onBrowserActiveChange),T("remove",window,Y,this.onActivity),T("remove",document,J,this.onActivity)});u(this,"startTimer",()=>{this.times.push({start:performance.now(),stop:null}),this.idleIntervalId==null&&(this.idleIntervalId=window.setInterval(this.checkIfIdle,this.idleTimeCheckIntervalMs))});u(this,"stopTimer",()=>{this.times.length>0&&(this.times[this.times.length-1].stop=performance.now()),this.idleIntervalId!=null&&(window.clearInterval(this.idleIntervalId),this.idleIntervalId=void 0)});u(this,"getTimeInMilliseconds",()=>this.times.reduce((e,n)=>(n.stop!=null?e=e+(n.stop-n.start):e=e+(performance.now()-n.start),e),0));u(this,"destroy",()=>{this.stopTimer(),this.notifyTheSession(),this.times=[],this.isIdle=!0,this.unregisterEventListeners()});this.idleTimeCheckIntervalMs=s,this.idleTimeoutMs=i,this.sessionTimeoutMs=r,this.callback=n,this.configStore=e,this.session=this.configStore.get(x),this.times=[],this.isIdle=!0,this.registerEventListeners(),this.onActivity()}}const p=[];function De(t){var a;const e=new Te({sourceId:t.sourceId,url:t.uploadPath??Se,replicateTo:t.replicateTo,batchSize:10,maxWaitingTime:9e3,preferBeacon:!1});let n;if(t.acrossDomain!==!1){n=window.location.hostname;const o=n.split(".");o.length>2&&o.shift(),n=o.join(".")}const s=new U("syft",[new P,new R(n)]),i=new Ee({uploader:e,identifyCallback:(o,l)=>{window.syftc.enabled!==!1&&t.sourceId}},s),r=new Fe({callback:{onNewSession:o=>{var l,f;i.session=o,t.autoTrackEnabled!==!1&&((f=(l=i.source)==null?void 0:l.syftIds)==null?void 0:f.email)!=null&&i.identify(i.source.syftIds.email,{source:"url_track"})},onEndSession:o=>{i.session=void 0},onContinueSession:(o,l,f,h)=>{i.session=o,t.autoTrackEnabled!==!1&&i.track("syft_session",{activeTime:l,sessionLength:f,content:h.join(`
`)})}},configStore:s});if(p.push(r.destroy),t.autoTrackEnabled!==!1){if(t.trackPageViews!==!1){let o;const l=h=>{o=h,ie(()=>{o===h&&i.page(void 0,h)},1e3)};l(I(t.hashMode!==!1));const f=Le(l,t.hashMode!==!1);p.push(f)}if(t.trackOutboundLinks!==!1){const o=Ae(l=>{i.track("OutboundLink Clicked",{href:l})});p.push(o)}if(t.trackButtonClicks!==!1){const o=we((l,f,h)=>{i.track("Button Clicked",{type:l,text:f,selectors:h})});p.push(o)}if(t.trackFormSubmits!==!1){const o=xe((f,h,y)=>{const Be=y!=null&&y.hostname!==window.location.hostname?"Outbound Form":"Form Submit",w=C(h.fields);i.track(Be,{...w}),(t.identifyFormPage==null||f===t.identifyFormPage)&&w.id!=null&&i.identify(w.id,{...w.traits,source:"form_submit"})},(a=i.source)==null?void 0:a.campaign);p.push(o);const l=Ce((f,h)=>{const y=C(h.fields);(t.identifyFormPage==null||f===t.identifyFormPage)&&y.id!=null&&i.identify(y.id,{...y.traits,source:"form_fill"})});p.push(l)}}const c=window.syft??[];return window.syft=i,c.forEach(o=>{const l=o.shift();l==="page"?i.page(...o):l==="track"?i.track(...o):l==="signup"?i.signup(...o):l==="identify"&&i.identify(...o)}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&e.urgentFlush()}),()=>{e.urgentFlush(),p.forEach(o=>{o()}),p.length=0}}function qe(){return typeof window.__tcfapi=="function"}function je(t){if(!qe()){t(!0);return}window.__tcfapi("addEventListener",2,(e,n)=>{var r;if(!n)return;if(e.gdprApplies===!1){t(!0);return}if(((r=e==null?void 0:e.purpose)==null?void 0:r.consents)==null){t(!1);return}const s=e.purpose.consents,i=s[7]==!0||s[10]==!0;t(i)})}function V(t){const e=De(t);window.onbeforeunload=()=>{e()}}function G(){try{const t=window.syftc??{},e=()=>{t.enabled=!0,V(t)};if(t.enabled===!1){window.syft={enable:e};return}if(t.enabled===!0){V(t);return}je(n=>{n?e():t.enabled=!1})}catch(t){console.warn("Syft initialization failed",t)}}document.readyState==="complete"?G():window.addEventListener("load",()=>{G()})});
//# sourceMappingURL=syft.umd.js.map
